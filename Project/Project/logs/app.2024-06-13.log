2024-06-13 23:30:01.934 INFO  c.example.Project.ProjectApplication - Starting ProjectApplication using Java 22.0.1 with PID 20028 (C:\Users\User\Desktop\BSEP\bsep-ra-2024-kt2-tim-16\Project\Project\target\classes started by User in C:\Users\User\Desktop\BSEP\bsep-ra-2024-kt2-tim-16\Project\Project)
2024-06-13 23:30:01.937 DEBUG c.example.Project.ProjectApplication - Running with Spring Boot v3.2.5, Spring v6.1.6
2024-06-13 23:30:01.939 INFO  c.example.Project.ProjectApplication - No active profile set, falling back to 1 default profile: "default"
2024-06-13 23:30:02.060 INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-06-13 23:30:02.061 INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-06-13 23:30:06.907 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-06-13 23:30:07.196 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 262 ms. Found 10 JPA repository interfaces.
2024-06-13 23:30:11.206 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (https)
2024-06-13 23:30:11.235 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["https-jsse-nio-8081"]
2024-06-13 23:30:11.246 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2024-06-13 23:30:11.247 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-06-13 23:30:11.392 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-06-13 23:30:11.395 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 9329 ms
2024-06-13 23:30:12.888 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-06-13 23:30:13.085 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
2024-06-13 23:30:13.176 INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2024-06-13 23:30:13.939 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2024-06-13 23:30:14.027 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-06-13 23:30:14.504 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@eaf9250
2024-06-13 23:30:14.508 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-06-13 23:30:14.606 WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-06-13 23:30:18.239 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-06-13 23:30:18.284 DEBUG org.hibernate.SQL - 
    alter table if exists admins 
       drop constraint if exists FKanhsicqm3lc8ya77tr7r0je18
2024-06-13 23:30:18.296 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2024-06-13 23:30:18.296 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - relation "admins" does not exist, skipping
2024-06-13 23:30:18.297 DEBUG org.hibernate.SQL - 
    alter table if exists clients 
       drop constraint if exists FKs3vg3lr3eadee5luiq6c78t1i
2024-06-13 23:30:18.298 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2024-06-13 23:30:18.298 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - relation "clients" does not exist, skipping
2024-06-13 23:30:18.299 DEBUG org.hibernate.SQL - 
    alter table if exists clients 
       drop constraint if exists FK1hgwdp9vl25xl9i7s354sifey
2024-06-13 23:30:18.300 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2024-06-13 23:30:18.300 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - relation "clients" does not exist, skipping
2024-06-13 23:30:18.301 DEBUG org.hibernate.SQL - 
    alter table if exists employees 
       drop constraint if exists FK1ekpcbo0lmdx6ou8e3fh9j4lq
2024-06-13 23:30:18.302 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2024-06-13 23:30:18.302 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - relation "employees" does not exist, skipping
2024-06-13 23:30:18.303 DEBUG org.hibernate.SQL - 
    alter table if exists employees 
       drop constraint if exists FKd6th9xowehhf1kmmq1dsseq28
2024-06-13 23:30:18.304 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2024-06-13 23:30:18.304 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - relation "employees" does not exist, skipping
2024-06-13 23:30:18.305 DEBUG org.hibernate.SQL - 
    drop table if exists admins cascade
2024-06-13 23:30:18.306 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2024-06-13 23:30:18.306 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - table "admins" does not exist, skipping
2024-06-13 23:30:18.306 DEBUG org.hibernate.SQL - 
    drop table if exists clients cascade
2024-06-13 23:30:18.307 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2024-06-13 23:30:18.308 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - table "clients" does not exist, skipping
2024-06-13 23:30:18.308 DEBUG org.hibernate.SQL - 
    drop table if exists commercial_requests cascade
2024-06-13 23:30:18.309 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2024-06-13 23:30:18.309 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - table "commercial_requests" does not exist, skipping
2024-06-13 23:30:18.310 DEBUG org.hibernate.SQL - 
    drop table if exists commercials cascade
2024-06-13 23:30:18.311 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2024-06-13 23:30:18.311 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - table "commercials" does not exist, skipping
2024-06-13 23:30:18.311 DEBUG org.hibernate.SQL - 
    drop table if exists companies cascade
2024-06-13 23:30:18.312 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2024-06-13 23:30:18.313 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - table "companies" does not exist, skipping
2024-06-13 23:30:18.313 DEBUG org.hibernate.SQL - 
    drop table if exists employees cascade
2024-06-13 23:30:18.314 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2024-06-13 23:30:18.314 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - table "employees" does not exist, skipping
2024-06-13 23:30:18.315 DEBUG org.hibernate.SQL - 
    drop table if exists passwordless_tokens cascade
2024-06-13 23:30:18.316 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2024-06-13 23:30:18.316 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - table "passwordless_tokens" does not exist, skipping
2024-06-13 23:30:18.316 DEBUG org.hibernate.SQL - 
    drop table if exists requests cascade
2024-06-13 23:30:18.317 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2024-06-13 23:30:18.318 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - table "requests" does not exist, skipping
2024-06-13 23:30:18.318 DEBUG org.hibernate.SQL - 
    drop table if exists tokens cascade
2024-06-13 23:30:18.319 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2024-06-13 23:30:18.319 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - table "tokens" does not exist, skipping
2024-06-13 23:30:18.319 DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2024-06-13 23:30:18.323 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2024-06-13 23:30:18.323 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - table "users" does not exist, skipping
2024-06-13 23:30:18.336 DEBUG org.hibernate.SQL - 
    create table admins (
        is_first_logging boolean not null,
        is_predefined boolean not null,
        id bigint not null,
        first_name varchar(255),
        last_name varchar(255),
        primary key (id)
    )
2024-06-13 23:30:18.365 DEBUG org.hibernate.SQL - 
    create table clients (
        package_type smallint check (package_type between 0 and 2),
        tfa_enabled boolean not null,
        type smallint check (type between 0 and 1),
        company_id bigint,
        id bigint not null,
        client_firm_name varchar(255),
        client_firm_residential_address varchar(255),
        client_surname_firmpib varchar(255),
        secret varchar(255),
        primary key (id)
    )
2024-06-13 23:30:18.382 DEBUG org.hibernate.SQL - 
    create table commercial_requests (
        is_accepted boolean not null,
        client_id bigint not null,
        create_deadline_date timestamp(6),
        end_date timestamp(6),
        id bigserial not null,
        start_date timestamp(6),
        description varchar(255),
        primary key (id)
    )
2024-06-13 23:30:18.396 DEBUG org.hibernate.SQL - 
    create table commercials (
        client_id bigint not null,
        end_date timestamp(6),
        id bigserial not null,
        start_date timestamp(6),
        description varchar(255),
        primary key (id)
    )
2024-06-13 23:30:18.406 DEBUG org.hibernate.SQL - 
    create table companies (
        id bigserial not null,
        address varchar(255),
        name varchar(255),
        primary key (id)
    )
2024-06-13 23:30:18.420 DEBUG org.hibernate.SQL - 
    create table employees (
        is_first_logging boolean not null,
        company_id bigint,
        id bigint not null,
        first_name varchar(255),
        last_name varchar(255),
        primary key (id)
    )
2024-06-13 23:30:18.434 DEBUG org.hibernate.SQL - 
    create table passwordless_tokens (
        is_used boolean not null,
        id bigserial not null,
        token varchar(255),
        primary key (id)
    )
2024-06-13 23:30:18.448 DEBUG org.hibernate.SQL - 
    create table requests (
        end_date date,
        start_date date,
        status smallint check (status between 0 and 2),
        id bigserial not null,
        username varchar(255),
        primary key (id)
    )
2024-06-13 23:30:18.462 DEBUG org.hibernate.SQL - 
    create table tokens (
        is_used boolean,
        client_id bigint not null,
        expiration_date timestamp(6),
        id bigserial not null,
        token varchar(255),
        primary key (id)
    )
2024-06-13 23:30:18.478 DEBUG org.hibernate.SQL - 
    create table users (
        email_checked boolean,
        role smallint check (role between 0 and 2),
        id bigserial not null,
        city varchar(255),
        country varchar(255),
        email varchar(255),
        password varchar(255),
        phone varchar(255),
        username varchar(255),
        primary key (id)
    )
2024-06-13 23:30:18.505 DEBUG org.hibernate.SQL - 
    alter table if exists admins 
       add constraint FKanhsicqm3lc8ya77tr7r0je18 
       foreign key (id) 
       references users
2024-06-13 23:30:18.523 DEBUG org.hibernate.SQL - 
    alter table if exists clients 
       add constraint FKs3vg3lr3eadee5luiq6c78t1i 
       foreign key (company_id) 
       references companies
2024-06-13 23:30:18.531 DEBUG org.hibernate.SQL - 
    alter table if exists clients 
       add constraint FK1hgwdp9vl25xl9i7s354sifey 
       foreign key (id) 
       references users
2024-06-13 23:30:18.537 DEBUG org.hibernate.SQL - 
    alter table if exists employees 
       add constraint FK1ekpcbo0lmdx6ou8e3fh9j4lq 
       foreign key (company_id) 
       references companies
2024-06-13 23:30:18.544 DEBUG org.hibernate.SQL - 
    alter table if exists employees 
       add constraint FKd6th9xowehhf1kmmq1dsseq28 
       foreign key (id) 
       references users
2024-06-13 23:30:18.567 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-06-13 23:30:20.519 INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2024-06-13 23:30:24.468 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-06-13 23:30:29.637 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@451d775, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4fdef62a, org.springframework.security.web.context.SecurityContextHolderFilter@a8a3536, org.springframework.security.web.header.HeaderWriterFilter@695c49e4, org.springframework.web.filter.CorsFilter@2fe6a755, org.springframework.security.web.authentication.logout.LogoutFilter@193168dd, com.example.Project.Security.TokenAuthenticationFilter@6d25e21a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@70b86b39, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1c071db3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@726a58d6, org.springframework.security.web.session.SessionManagementFilter@58e2e84c, org.springframework.security.web.access.ExceptionTranslationFilter@4f054fde, org.springframework.security.web.access.intercept.AuthorizationFilter@304e16b1]
2024-06-13 23:30:30.720 WARN  o.s.b.a.t.ThymeleafAutoConfiguration$DefaultTemplateResolverConfiguration - Cannot find template location: classpath:/templates/ (please add some templates, check your Thymeleaf configuration, or set spring.thymeleaf.check-template-location=false)
2024-06-13 23:30:33.468 INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2024-06-13 23:30:33.521 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["https-jsse-nio-8081"]
2024-06-13 23:30:33.603 INFO  o.a.t.u.net.NioEndpoint.certificate - Connector [https-jsse-nio-8081], TLS virtual host [_default_], certificate type [UNDEFINED] configured from keystore [C:\Users\User\.keystore] using alias [6877445b-e816-42fa-bb10-7cb449c7428e] with trust store [null]
2024-06-13 23:30:33.651 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (https) with context path ''
2024-06-13 23:30:33.687 INFO  c.example.Project.ProjectApplication - Started ProjectApplication in 32.866 seconds (process running for 38.099)
2024-06-13 23:34:59.946 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-06-13 23:34:59.947 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-06-13 23:34:59.951 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2024-06-13 23:35:00.603 DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        case 
            when u1_1.id is not null 
                then 1 
            when u1_2.id is not null 
                then 2 
            when u1_3.id is not null 
                then 3 
            when u1_0.id is not null 
                then 0 
            end,
            u1_0.city,
            u1_0.country,
            u1_0.email,
            u1_0.email_checked,
            u1_0.password,
            u1_0.phone,
            u1_0.role,
            u1_0.username,
            u1_1.first_name,
            u1_1.is_first_logging,
            u1_1.is_predefined,
            u1_1.last_name,
            u1_2.client_firm_name,
            u1_2.client_firm_residential_address,
            u1_2.client_surname_firmpib,
            u1_2.company_id,
            u1_2.package_type,
            u1_2.secret,
            u1_2.tfa_enabled,
            u1_2.type,
            u1_3.company_id,
            u1_3.first_name,
            u1_3.is_first_logging,
            u1_3.last_name 
        from
            users u1_0 
        left join
            admins u1_1 
                on u1_0.id=u1_1.id 
        left join
            clients u1_2 
                on u1_0.id=u1_2.id 
        left join
            employees u1_3 
                on u1_0.id=u1_3.id 
        where
            u1_0.username=?
2024-06-13 23:35:00.643 DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.address,
        c1_0.name 
    from
        companies c1_0 
    where
        c1_0.id=?
2024-06-13 23:35:01.535 DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        case 
            when u1_1.id is not null 
                then 1 
            when u1_2.id is not null 
                then 2 
            when u1_3.id is not null 
                then 3 
            when u1_0.id is not null 
                then 0 
            end,
            u1_0.city,
            u1_0.country,
            u1_0.email,
            u1_0.email_checked,
            u1_0.password,
            u1_0.phone,
            u1_0.role,
            u1_0.username,
            u1_1.first_name,
            u1_1.is_first_logging,
            u1_1.is_predefined,
            u1_1.last_name,
            u1_2.client_firm_name,
            u1_2.client_firm_residential_address,
            u1_2.client_surname_firmpib,
            u1_2.company_id,
            u1_2.package_type,
            u1_2.secret,
            u1_2.tfa_enabled,
            u1_2.type,
            u1_3.company_id,
            u1_3.first_name,
            u1_3.is_first_logging,
            u1_3.last_name 
        from
            users u1_0 
        left join
            admins u1_1 
                on u1_0.id=u1_1.id 
        left join
            clients u1_2 
                on u1_0.id=u1_2.id 
        left join
            employees u1_3 
                on u1_0.id=u1_3.id 
        where
            u1_0.username=?
2024-06-13 23:35:01.538 DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.address,
        c1_0.name 
    from
        companies c1_0 
    where
        c1_0.id=?
2024-06-13 23:35:01.551 INFO  c.e.P.S.CommercialRequestService - Get user by id
2024-06-13 23:35:01.574 DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        case 
            when u1_1.id is not null 
                then 1 
            when u1_2.id is not null 
                then 2 
            when u1_3.id is not null 
                then 3 
            when u1_0.id is not null 
                then 0 
            end,
            u1_0.city,
            u1_0.country,
            u1_0.email,
            u1_0.email_checked,
            u1_0.password,
            u1_0.phone,
            u1_0.role,
            u1_0.username,
            u1_1.first_name,
            u1_1.is_first_logging,
            u1_1.is_predefined,
            u1_1.last_name,
            u1_2.client_firm_name,
            u1_2.client_firm_residential_address,
            u1_2.client_surname_firmpib,
            c1_0.id,
            c1_0.address,
            c1_0.name,
            u1_2.package_type,
            u1_2.secret,
            u1_2.tfa_enabled,
            u1_2.type,
            c2_0.id,
            c2_0.address,
            c2_0.name,
            u1_3.first_name,
            u1_3.is_first_logging,
            u1_3.last_name 
        from
            users u1_0 
        left join
            admins u1_1 
                on u1_0.id=u1_1.id 
        left join
            clients u1_2 
                on u1_0.id=u1_2.id 
        left join
            employees u1_3 
                on u1_0.id=u1_3.id 
        left join
            companies c1_0 
                on c1_0.id=u1_2.company_id 
        left join
            companies c2_0 
                on c2_0.id=u1_3.company_id 
        where
            u1_0.id=?
2024-06-13 23:36:56.394 DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        case 
            when u1_1.id is not null 
                then 1 
            when u1_2.id is not null 
                then 2 
            when u1_3.id is not null 
                then 3 
            when u1_0.id is not null 
                then 0 
            end,
            u1_0.city,
            u1_0.country,
            u1_0.email,
            u1_0.email_checked,
            u1_0.password,
            u1_0.phone,
            u1_0.role,
            u1_0.username,
            u1_1.first_name,
            u1_1.is_first_logging,
            u1_1.is_predefined,
            u1_1.last_name,
            u1_2.client_firm_name,
            u1_2.client_firm_residential_address,
            u1_2.client_surname_firmpib,
            u1_2.company_id,
            u1_2.package_type,
            u1_2.secret,
            u1_2.tfa_enabled,
            u1_2.type,
            u1_3.company_id,
            u1_3.first_name,
            u1_3.is_first_logging,
            u1_3.last_name 
        from
            users u1_0 
        left join
            admins u1_1 
                on u1_0.id=u1_1.id 
        left join
            clients u1_2 
                on u1_0.id=u1_2.id 
        left join
            employees u1_3 
                on u1_0.id=u1_3.id 
        where
            u1_0.username=?
2024-06-13 23:36:56.398 DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.address,
        c1_0.name 
    from
        companies c1_0 
    where
        c1_0.id=?
2024-06-13 23:36:56.479 INFO  c.e.P.S.CommercialRequestService - Deleting client with id: 2
2024-06-13 23:36:56.482 DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_1.city,
        c1_1.country,
        c1_1.email,
        c1_1.email_checked,
        c1_1.password,
        c1_1.phone,
        c1_1.role,
        c1_1.username,
        c1_0.client_firm_name,
        c1_0.client_firm_residential_address,
        c1_0.client_surname_firmpib,
        c2_0.id,
        c2_0.address,
        c2_0.name,
        c1_0.package_type,
        c1_0.secret,
        c1_0.tfa_enabled,
        c1_0.type 
    from
        clients c1_0 
    join
        users c1_1 
            on c1_0.id=c1_1.id 
    left join
        companies c2_0 
            on c2_0.id=c1_0.company_id 
    where
        c1_0.id=?
2024-06-13 23:36:56.580 DEBUG org.hibernate.SQL - 
    delete 
    from
        clients 
    where
        id=?
2024-06-13 23:36:56.589 DEBUG org.hibernate.SQL - 
    delete 
    from
        users 
    where
        id=?
2024-06-13 23:36:56.600 DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        case 
            when u1_1.id is not null 
                then 1 
            when u1_2.id is not null 
                then 2 
            when u1_3.id is not null 
                then 3 
            when u1_0.id is not null 
                then 0 
            end,
            u1_0.city,
            u1_0.country,
            u1_0.email,
            u1_0.email_checked,
            u1_0.password,
            u1_0.phone,
            u1_0.role,
            u1_0.username,
            u1_1.first_name,
            u1_1.is_first_logging,
            u1_1.is_predefined,
            u1_1.last_name,
            u1_2.client_firm_name,
            u1_2.client_firm_residential_address,
            u1_2.client_surname_firmpib,
            c1_0.id,
            c1_0.address,
            c1_0.name,
            u1_2.package_type,
            u1_2.secret,
            u1_2.tfa_enabled,
            u1_2.type,
            c2_0.id,
            c2_0.address,
            c2_0.name,
            u1_3.first_name,
            u1_3.is_first_logging,
            u1_3.last_name 
        from
            users u1_0 
        left join
            admins u1_1 
                on u1_0.id=u1_1.id 
        left join
            clients u1_2 
                on u1_0.id=u1_2.id 
        left join
            employees u1_3 
                on u1_0.id=u1_3.id 
        left join
            companies c1_0 
                on c1_0.id=u1_2.company_id 
        left join
            companies c2_0 
                on c2_0.id=u1_3.company_id 
        where
            u1_0.id=?
2024-06-13 23:36:56.608 INFO  c.e.P.S.CommercialRequestService - Deleting all commercial requests with clientId: 2
2024-06-13 23:36:56.645 DEBUG org.hibernate.SQL - 
    delete 
    from
        commercial_requests 
    where
        client_id=?
2024-06-13 23:36:56.649 INFO  c.e.P.S.CommercialRequestService - Deleting all commercials  with clientId: 2
2024-06-13 23:36:56.653 DEBUG org.hibernate.SQL - 
    delete 
    from
        commercials 
    where
        client_id=?
2024-06-13 23:36:56.660 INFO  c.e.P.S.CommercialRequestService - Deleted client with id: 2
